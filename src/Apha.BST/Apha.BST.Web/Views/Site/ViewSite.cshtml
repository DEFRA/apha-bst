@model Apha.BST.Web.Models.SiteListViewModel
@{
	ViewData["Title"] = "ViewSite";
}
@{
	var isDisabled = !Model.CanEdit ? "disabled" : null;
}
<div class="w-100 h-100 p-2">
	<div class=" d-flex flex-column mb-3">
		<div class="d-flex justify-content-between me-5  ">
			<span class="w-70 fw-bold text-decoration-underline">Site details </span>
			<span class="w-30  me-5 px-5">
				<a href="@Url.Action("Index", "Home")" class="back-button" title="Back to home">
					<img src="~/Images/cancel.jpeg" size="2px" alt="Back to home" />
				</a>
			</span>
		</div>
		<div class="w-100 d-flex justify-content-start">
			<span class="w-30"><label for="ddlSiteView">Select site:</label></span>
			<span class="w-70 ms-5 ">
				<form method="get" asp-action="ViewSite" style="display:inline;">
					<select id="siteSelect" class="search-dropdown" name="selectedSite" asp-for="SelectedSite" asp-items="Model.AllSites" disabled="@isDisabled" onchange="this.form.submit()">
							<option value="All">All plants</option>
						</select>				

				</form>
			</span>

		</div>
	</div>
	<div class="w-100 d-flex justify-content-start">
		<span class=" w-30">Site details</span>
		<span class="w-70 ms-5"></span>
		<table id="siteTable" class="grid-table">
			<thead>
				<tr>
					<th class="w-25">PlantNo</th>
					<th class="w-25">Name</th>
					<th class="w-25">AHVLA</th>
					<th style="width:10%"></th>
				</tr>
			</thead>
			<tbody>
				@if (Model.FilteredSites != null)
				{
					@foreach (var site in Model.FilteredSites)
					{
						<tr>
							<td>@site.PlantNo</td>
							<td>@site.Name</td>
							<td>@site.Ahvla</td>							
							<td>
								<a href="@(!Model.CanEdit ? "#" :Url.Action("EditSite", "Site", new { plantNo = site.PlantNo }))" class="btn btn-link p-0 m-0  fw-bold custom-underline-hover">Edit</a>
							</td>
						</tr>
					}
				}
			</tbody>
		</table>
	</div>

	<div class="ErrorText">
		<span id="lblExDelSite" class="text-danger"></span>
	</div>
</div>

