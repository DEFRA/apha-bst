@* @using Apha.BST.Core.Entities
@model List<Site> *@
@* @model IEnumerable<Apha.BST.Web.Models.SiteViewModel> *@
@model Apha.BST.Web.Models.SiteListViewModel
@* @model IEnumerable<Apha.BST.Application.DTOs.SiteDTO> *@
@{
	ViewData["Title"] = "ViewSite";
}
<div class="w-100 h-100 p-2">
	<div class=" d-flex flex-column mb-3">
		<div class="d-flex justify-content-between me-5  ">
			<span class="w-70 fw-bold text-decoration-underline">Site details </span>
			<span class="w-30  me-5 px-5">
				<a href="@Url.Action("Index", "Home")" class="back-button" title="Back to home">
					<img src="~/Images/cancel.jpeg" size="2px" alt="Back to home" />
				</a>
			</span>
		</div>
		<div class="w-100 d-flex justify-content-start">
			<span class="w-30"><label for="ddlSiteView">Select site:</label></span>
			<span class="w-70 ms-5 ">
				@* <select id="siteSelect" class="search-dropdown" name="selectedSite" class="form-control" asp-items="@(new SelectList(Model, "PlantNo", "Name", "All"))" onchange="this.form.submit()">
					<option value="All">All plants</option>
				</select> *@
				<form method="get" asp-action="ViewSite" style="display:inline;">
					<select id="siteSelect" class="search-dropdown" name="selectedSite" class="form-control" onchange="this.form.submit()">
						@if (Model.SelectedSite == "All")
						{
							<option value="All" selected>All plants</option>
						}
						else
						{
							<option value="All">All plants</option>
						}
						@foreach (var site in Model.AllSites)
						{
							if (Model.SelectedSite == site.PlantNo)
							{
								<option value="@site.PlantNo" selected>@site.Name</option>
							}
							else
							{
								<option value="@site.PlantNo">@site.Name</option>
							}
						}
					</select>
				</form>
			</span>

		</div>
		</a>
	</div>
	<div class="w-100 d-flex justify-content-start">
		<span class=" w-30">Site details</span>
		<span class="w-70 ms-5"></span>
		<table id="siteTable" class="grid-table">
			<thead>
				<tr>
					<th>PlantNo</th>
					<th>Name</th>
					<th>AHVLA</th>
				</tr>
			</thead>
			<tbody>
				@foreach (var site in Model.FilteredSites)
				{
					<tr>
						<td>@site.PlantNo</td>
						<td>@site.Name</td>
						<td>@site.Ahvla</td>
					</tr>
				}
			</tbody>
		</table>
	</div>

	<div class="error-message">
		<span id="lblExDelSite" class="text-danger"></span>
	</div>
</div>
